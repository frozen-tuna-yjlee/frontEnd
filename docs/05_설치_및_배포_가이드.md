# 설치 및 배포 가이드

## 1. 개발 환경 설정

### 1.1 필수 요구사항

#### Node.js 설치
- **버전**: Node.js v16 이상
- **다운로드**: [Node.js 공식 사이트](https://nodejs.org/)
- **확인 방법**:
```bash
node --version
npm --version
```

#### 패키지 매니저
- **npm**: Node.js와 함께 설치됨
- **대안**: yarn, pnpm 사용 가능

---

### 1.2 프로젝트 클론 및 설치

#### 1단계: 프로젝트 클론
```bash
git clone <repository-url>
cd frontEnd
```

#### 2단계: 의존성 설치
```bash
npm install
```

**설치되는 주요 패키지**:
- react, react-dom
- typescript
- vite
- axios
- tailwindcss
- 기타 개발 의존성

#### 3단계: 설치 확인
```bash
npm list --depth=0
```

---

### 1.3 환경 변수 설정

#### 개발 환경
현재는 하드코딩된 설정을 사용하지만, 향후 환경 변수로 관리할 수 있습니다.

**`.env.development` 파일 생성** (선택사항):
```env
VITE_API_BASE_URL=http://localhost:3000
VITE_KAKAO_JS_KEY=your_kakao_js_key
```

**`.env.production` 파일 생성** (선택사항):
```env
VITE_API_BASE_URL=https://api.yourdomain.com
VITE_KAKAO_JS_KEY=your_kakao_js_key
```

**사용 방법**:
```typescript
// vite.config.ts 또는 코드에서
const apiBaseUrl = import.meta.env.VITE_API_BASE_URL;
```

---

## 2. 개발 서버 실행

### 2.1 기본 개발 서버

```bash
npm run dev
```

**설정**:
- **호스트**: 0.0.0.0 (모든 네트워크 인터페이스)
- **포트**: 5173
- **자동 브라우저 열기**: 활성화
- **HMR**: 활성화 (Hot Module Replacement)

**접속 URL**:
- 로컬: http://localhost:5173
- 네트워크: http://[your-ip]:5173

---

### 2.2 추가 개발 스크립트

#### 호스트 및 포트 지정
```bash
npm start
```
- `0.0.0.0:5173`에서 실행

#### 디버그 모드
```bash
npm run debug
```
- 디버그 로그 활성화

#### 상세 디버그 모드
```bash
npm run debug:verbose
```
- 강제 리빌드 포함

#### 인스펙트 모드
```bash
npm run debug:inspect
```
- Node.js 인스펙터 활성화

---

### 2.3 개발 서버 문제 해결

#### 포트가 이미 사용 중인 경우
```bash
# Windows
netstat -ano | findstr :5173
taskkill /PID <PID> /F

# Linux/Mac
lsof -ti:5173 | xargs kill -9
```

#### 다른 포트 사용
`vite.config.ts` 파일 수정:
```typescript
export default defineConfig({
  server: {
    port: 3000, // 원하는 포트로 변경
  }
});
```

---

## 3. 빌드

### 3.1 프로덕션 빌드

```bash
npm run build
```

**빌드 과정**:
1. TypeScript 컴파일 (`tsc -b`)
2. Vite 빌드
3. 최적화 및 번들링
4. `dist/` 디렉토리에 산출물 생성

**빌드 산출물**:
```
dist/
├── index.html
├── assets/
│   ├── index-[hash].js
│   ├── index-[hash].css
│   └── ...
└── vite.svg
```

---

### 3.2 빌드 최적화

#### 코드 스플리팅
Vite는 자동으로 코드 스플리팅을 수행합니다.

#### 압축
- JavaScript: 자동 압축
- CSS: 자동 압축
- 이미지: 수동 최적화 필요

---

### 3.3 빌드 미리보기

```bash
npm run preview
```

로컬에서 프로덕션 빌드를 미리 확인할 수 있습니다.

---

## 4. 배포

### 4.1 정적 파일 호스팅

#### Netlify 배포

**1단계: Netlify CLI 설치**
```bash
npm install -g netlify-cli
```

**2단계: 로그인**
```bash
netlify login
```

**3단계: 배포**
```bash
npm run build
netlify deploy --prod --dir=dist
```

**또는 Netlify 웹 인터페이스 사용**:
1. Netlify에 프로젝트 연결
2. Build command: `npm run build`
3. Publish directory: `dist`

---

#### Vercel 배포

**1단계: Vercel CLI 설치**
```bash
npm install -g vercel
```

**2단계: 배포**
```bash
npm run build
vercel --prod
```

**또는 Vercel 웹 인터페이스 사용**:
1. Vercel에 프로젝트 연결
2. Framework Preset: Vite
3. Build Command: `npm run build`
4. Output Directory: `dist`

---

#### GitHub Pages 배포

**1단계: `vite.config.ts` 수정**
```typescript
export default defineConfig({
  base: '/your-repo-name/', // GitHub 저장소 이름
  // ...
});
```

**2단계: GitHub Actions 설정**

`.github/workflows/deploy.yml` 파일 생성:
```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches: [ main ]

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v2
        with:
          node-version: '18'
      - run: npm install
      - run: npm run build
      - uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dist
```

---

### 4.2 서버 배포

#### Nginx 설정

**설정 파일**: `/etc/nginx/sites-available/portal`

```nginx
server {
    listen 80;
    server_name yourdomain.com;

    root /var/www/portal/dist;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }

    # API 프록시 (필요한 경우)
    location /api {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }

    # 정적 파일 캐싱
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
```

**활성화**:
```bash
sudo ln -s /etc/nginx/sites-available/portal /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl reload nginx
```

---

#### Apache 설정

**`.htaccess` 파일** (`dist/` 디렉토리에 생성):

```apache
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . /index.html [L]
</IfModule>
```

---

### 4.3 Docker 배포

#### Dockerfile 생성

```dockerfile
# 빌드 단계
FROM node:18-alpine AS builder

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY . .
RUN npm run build

# 프로덕션 단계
FROM nginx:alpine

COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]
```

#### nginx.conf

```nginx
server {
    listen 80;
    server_name localhost;
    root /usr/share/nginx/html;
    index index.html;

    location / {
        try_files $uri $uri/ /index.html;
    }
}
```

#### 빌드 및 실행

```bash
docker build -t portal-frontend .
docker run -d -p 80:80 portal-frontend
```

---

## 5. 백엔드 연동 설정

### 5.1 API Base URL 설정

#### 개발 환경
`src/services/axios.ts` 파일에서 설정:
```typescript
const axiosInstance = axios.create({
  baseURL: 'http://localhost:3000',
  // ...
});
```

#### 프로덕션 환경
환경 변수 사용 (권장):
```typescript
const axiosInstance = axios.create({
  baseURL: import.meta.env.VITE_API_BASE_URL || 'http://localhost:3000',
  // ...
});
```

---

### 5.2 CORS 설정

백엔드에서 CORS를 허용해야 합니다:

```javascript
// Express 예시
app.use(cors({
  origin: 'http://localhost:5173', // 개발 환경
  credentials: true
}));
```

---

## 6. 카카오 로그인 설정

### 6.1 카카오 개발자 콘솔 설정

1. [카카오 개발자 콘솔](https://developers.kakao.com/) 접속
2. 애플리케이션 생성
3. 플랫폼 설정:
   - Web 플랫폼 추가
   - 사이트 도메인 등록
4. 카카오 로그인 활성화
5. Redirect URI 설정: `http://localhost:5173` (개발), `https://yourdomain.com` (프로덕션)

### 6.2 JavaScript 키 설정

`src/components/auth/KakaoLogin.tsx` 파일에서:
```typescript
const kakaoKey = 'your_kakao_js_key';
```

또는 환경 변수 사용:
```typescript
const kakaoKey = import.meta.env.VITE_KAKAO_JS_KEY;
```

---

## 7. 성능 최적화

### 7.1 빌드 최적화

#### 코드 스플리팅 확인
```bash
npm run build
# dist/assets/ 디렉토리에서 청크 파일 확인
```

#### 번들 크기 분석
```bash
npm install --save-dev rollup-plugin-visualizer
```

`vite.config.ts`에 추가:
```typescript
import { visualizer } from 'rollup-plugin-visualizer';

export default defineConfig({
  plugins: [
    react(),
    visualizer({ open: true })
  ],
  // ...
});
```

---

### 7.2 이미지 최적화

- WebP 포맷 사용
- 이미지 압축
- 지연 로딩 (lazy loading)

---

## 8. 모니터링 및 로깅

### 8.1 에러 추적

#### Sentry 설정 (선택사항)

```bash
npm install @sentry/react
```

```typescript
import * as Sentry from "@sentry/react";

Sentry.init({
  dsn: "your-sentry-dsn",
  environment: import.meta.env.MODE,
});
```

---

### 8.2 분석 도구

#### Google Analytics (선택사항)

```typescript
// index.html에 추가
<script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
```

---

## 9. 문제 해결

### 9.1 일반적인 문제

#### 빌드 실패
```bash
# node_modules 삭제 후 재설치
rm -rf node_modules package-lock.json
npm install
```

#### 타입 에러
```bash
# TypeScript 재컴파일
npm run build
```

#### 포트 충돌
`vite.config.ts`에서 포트 변경

---

### 9.2 디버깅

#### 개발자 도구
- Chrome DevTools 사용
- React DevTools 확장 프로그램 설치

#### 로그 확인
```typescript
console.log('디버그 정보');
```

---

## 10. 체크리스트

### 배포 전 체크리스트

- [ ] 모든 의존성 설치 완료
- [ ] 빌드 성공 확인
- [ ] 환경 변수 설정 완료
- [ ] API Base URL 확인
- [ ] 카카오 로그인 키 설정
- [ ] CORS 설정 확인
- [ ] 프로덕션 빌드 테스트
- [ ] 브라우저 호환성 테스트
- [ ] 반응형 디자인 확인
- [ ] 성능 최적화 확인

---

## 11. 추가 리소스

### 공식 문서
- [React](https://react.dev/)
- [TypeScript](https://www.typescriptlang.org/)
- [Vite](https://vitejs.dev/)
- [Tailwind CSS](https://tailwindcss.com/)

### 유용한 도구
- [React DevTools](https://react.dev/learn/react-developer-tools)
- [Vite Plugin](https://vitejs.dev/plugins/)

